<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FEMU: femu/lib/rte_ring.c 文件参考</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">FEMU
   &#160;<span id="projectnumber">原版 master 7e238cc</span>
   </div>
   <div id="projectbrief">FEMU: Accurate, Scalable and Extensible NVMe SSD Emulator (FAST&#39;18)</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="搜索" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- 制作者 Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'搜索');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('rte__ring_8c.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">宏定义</a> &#124;
<a href="#func-members">函数</a>  </div>
  <div class="headertitle">
<div class="title">rte_ring.c 文件参考</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;sys/types.h&gt;</code><br />
<code>#include &lt;unistd.h&gt;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;stdarg.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;inttypes.h&gt;</code><br />
<code>#include &lt;errno.h&gt;</code><br />
<code>#include &lt;sys/queue.h&gt;</code><br />
<code>#include &quot;<a class="el" href="rte__ring_8h_source.html">../inc/rte_ring.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
rte_ring.c 的引用(Include)关系图:</div>
<div class="dyncontent">
<div class="center"><img src="rte__ring_8c__incl.png" border="0" usemap="#femu_2lib_2rte__ring_8c" alt=""/></div>
<map name="femu_2lib_2rte__ring_8c" id="femu_2lib_2rte__ring_8c">
<area shape="rect" title=" " alt="" coords="316,5,457,32"/>
<area shape="rect" title=" " alt="" coords="5,80,101,107"/>
<area shape="rect" title=" " alt="" coords="125,80,200,107"/>
<area shape="rect" title=" " alt="" coords="119,155,185,181"/>
<area shape="rect" title=" " alt="" coords="571,80,645,107"/>
<area shape="rect" title=" " alt="" coords="670,80,741,107"/>
<area shape="rect" title=" " alt="" coords="210,155,281,181"/>
<area shape="rect" title=" " alt="" coords="765,80,851,107"/>
<area shape="rect" title=" " alt="" coords="305,155,373,181"/>
<area shape="rect" title=" " alt="" coords="881,155,981,181"/>
<area shape="rect" href="rte__ring_8h.html" title=" " alt="" coords="377,80,495,107"/>
<area shape="rect" title=" " alt="" coords="397,155,499,181"/>
<area shape="rect" href="rte__atomic__x86_8h.html" title=" " alt="" coords="523,155,658,181"/>
<area shape="rect" href="rte__branch__prediction_8h.html" title=" " alt="" coords="682,155,857,181"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
宏定义</h2></td></tr>
<tr class="memitem:a9d095bc1979e862ea41c3222f153715c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rte__ring_8c.html#a9d095bc1979e862ea41c3222f153715c">POWEROF2</a>(x)&#160;&#160;&#160;((((x)-1) &amp; (x)) == 0)</td></tr>
<tr class="separator:a9d095bc1979e862ea41c3222f153715c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
函数</h2></td></tr>
<tr class="memitem:ac29f8523d355c107377858bdeb468486"><td class="memItemLeft" align="right" valign="top">ssize_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rte__ring_8c.html#ac29f8523d355c107377858bdeb468486">rte_ring_get_memsize</a> (unsigned count)</td></tr>
<tr class="separator:ac29f8523d355c107377858bdeb468486"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a44f25853c926ac1b29562857244366"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rte__ring_8c.html#a7a44f25853c926ac1b29562857244366">rte_ring_init</a> (struct <a class="el" href="structrte__ring.html">rte_ring</a> *r, const char *name, unsigned count, unsigned flags)</td></tr>
<tr class="separator:a7a44f25853c926ac1b29562857244366"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a122812947c00f9ed3066232accf5fa5a"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structrte__ring.html">rte_ring</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rte__ring_8c.html#a122812947c00f9ed3066232accf5fa5a">rte_ring_create</a> (const char *name, unsigned count, unsigned flags)</td></tr>
<tr class="separator:a122812947c00f9ed3066232accf5fa5a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a564e012c1eb4ae08f9eea3acfd08b377"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rte__ring_8c.html#a564e012c1eb4ae08f9eea3acfd08b377">rte_ring_free</a> (struct <a class="el" href="structrte__ring.html">rte_ring</a> *r)</td></tr>
<tr class="separator:a564e012c1eb4ae08f9eea3acfd08b377"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09c464281266543ebc0766902467c69b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rte__ring_8c.html#a09c464281266543ebc0766902467c69b">rte_ring_dump</a> (FILE *f, const struct <a class="el" href="structrte__ring.html">rte_ring</a> *r)</td></tr>
<tr class="separator:a09c464281266543ebc0766902467c69b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6bc92444f7239ca27c5a89de99f5f4ac"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structrte__ring.html">rte_ring</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rte__ring_8c.html#a6bc92444f7239ca27c5a89de99f5f4ac">femu_ring_create</a> (enum <a class="el" href="rte__ring_8h.html#a40c2b32849ee40a3926720f2ab1cdec7">femu_ring_type</a> type, size_t count)</td></tr>
<tr class="separator:a6bc92444f7239ca27c5a89de99f5f4ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae4026d87730ebef2cbcd08a42778e80"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rte__ring_8c.html#aae4026d87730ebef2cbcd08a42778e80">femu_ring_free</a> (struct <a class="el" href="structrte__ring.html">rte_ring</a> *ring)</td></tr>
<tr class="separator:aae4026d87730ebef2cbcd08a42778e80"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a96ef17a77ac3deecdb8a1fb71b6bdf63"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rte__ring_8c.html#a96ef17a77ac3deecdb8a1fb71b6bdf63">femu_ring_count</a> (struct <a class="el" href="structrte__ring.html">rte_ring</a> *ring)</td></tr>
<tr class="separator:a96ef17a77ac3deecdb8a1fb71b6bdf63"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3afc06d02f63e84fe1569c99955af57a"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rte__ring_8c.html#a3afc06d02f63e84fe1569c99955af57a">femu_ring_enqueue</a> (struct <a class="el" href="structrte__ring.html">rte_ring</a> *ring, void **objs, size_t count)</td></tr>
<tr class="separator:a3afc06d02f63e84fe1569c99955af57a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab2417e0e85ffd0e61ec4b0ee263ab809"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rte__ring_8c.html#ab2417e0e85ffd0e61ec4b0ee263ab809">femu_ring_dequeue</a> (struct <a class="el" href="structrte__ring.html">rte_ring</a> *ring, void **objs, size_t count)</td></tr>
<tr class="separator:ab2417e0e85ffd0e61ec4b0ee263ab809"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">宏定义说明</h2>
<a id="a9d095bc1979e862ea41c3222f153715c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d095bc1979e862ea41c3222f153715c">&#9670;&nbsp;</a></span>POWEROF2</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define POWEROF2</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">x</td><td>)</td>
          <td>&#160;&#160;&#160;((((x)-1) &amp; (x)) == 0)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">函数说明</h2>
<a id="a96ef17a77ac3deecdb8a1fb71b6bdf63"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a96ef17a77ac3deecdb8a1fb71b6bdf63">&#9670;&nbsp;</a></span>femu_ring_count()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t femu_ring_count </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structrte__ring.html">rte_ring</a> *&#160;</td>
          <td class="paramname"><em>ring</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the number of objects in the ring.</p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramname">ring</td><td>the ring.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>the number of objects in the ring. </dd></dl>
<div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="rte__ring_8c_a96ef17a77ac3deecdb8a1fb71b6bdf63_cgraph.png" border="0" usemap="#rte__ring_8c_a96ef17a77ac3deecdb8a1fb71b6bdf63_cgraph" alt=""/></div>
<map name="rte__ring_8c_a96ef17a77ac3deecdb8a1fb71b6bdf63_cgraph" id="rte__ring_8c_a96ef17a77ac3deecdb8a1fb71b6bdf63_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,136,32"/>
<area shape="rect" href="rte__ring_8h.html#abc8376d2c6e609707d52032860880b34" title=" " alt="" coords="184,5,299,32"/>
</map>
</div>
<div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><img src="rte__ring_8c_a96ef17a77ac3deecdb8a1fb71b6bdf63_icgraph.png" border="0" usemap="#rte__ring_8c_a96ef17a77ac3deecdb8a1fb71b6bdf63_icgraph" alt=""/></div>
<map name="rte__ring_8c_a96ef17a77ac3deecdb8a1fb71b6bdf63_icgraph" id="rte__ring_8c_a96ef17a77ac3deecdb8a1fb71b6bdf63_icgraph">
<area shape="rect" title=" " alt="" coords="1689,31,1820,57"/>
<area shape="rect" href="ftl_8c.html#a3716c928ff3ccf16e82ae281fd3dd6d3" title="ftl线程函数，不断从to_ftl中取req，处理（计算出时延）后放入to_poller" alt="" coords="1517,5,1601,32"/>
<area shape="rect" href="nvme-io_8c.html#a581e208522e056298eed5248b50af242" title="从to_poller队列中取req，放入cq中，然后通知上层操作已完成" alt="" coords="1477,56,1641,83"/>
<area shape="rect" href="ftl_8h.html#af3f6de830b620d1f3060c7de8c8ddec0" title="初始化ssd参数，为ssd各层结构体分配空间，创建ftl线程" alt="" coords="1342,5,1414,32"/>
<area shape="rect" href="bb_8c.html#a3fc7384f815cca2f52003206b20324df" title=" " alt="" coords="1170,5,1237,32"/>
<area shape="rect" href="nvme_8h.html#a5b8b300920ee99be86c5e3e80a6f7949" title=" " alt="" coords="914,5,1075,32"/>
<area shape="rect" href="femu_8c.html#a76a47b73caa1fa75fb706e3ed8f16a73" title=" " alt="" coords="667,5,861,32"/>
<area shape="rect" href="femu_8c.html#a966fbeb7afc495936413dbc445a0dd45" title=" " alt="" coords="472,5,579,32"/>
<area shape="rect" href="femu_8c.html#aeb3b70286609648db37222148efcf8d3" title=" " alt="" coords="229,5,353,32"/>
<area shape="rect" href="nvme-io_8c.html#acb7bf552fb77faee4d0aa021d51af4b7" title="nvme poller线程函数，不断处理sq和生成cq" alt="" coords="1327,56,1429,83"/>
<area shape="rect" href="nvme_8h.html#a81f7e8af7ddcdfe9bef6af6c0333462d" title="创建poller线程，以及两个ring queue：to_ftl和to_poller" alt="" coords="1128,56,1279,83"/>
<area shape="rect" href="nvme-admin_8c.html#a8b2764426b75545dfc03229b811607eb" title=" " alt="" coords="909,56,1080,83"/>
<area shape="rect" href="nvme-admin_8c.html#ac726ef5f792706a8a28f07f19c5097b1" title="识别、执行admin命令" alt="" coords="693,56,835,83"/>
<area shape="rect" href="nvme_8h.html#a7042f589909852500d6f26c36b78850b" title="处理admin命令的sq队列" alt="" coords="432,56,619,83"/>
<area shape="rect" href="femu_8c.html#ac83bc83578ac4c5c414ec892ca2169e3" title=" " alt="" coords="197,56,384,83"/>
<area shape="rect" href="femu_8c.html#a78a5db5b8b1cead9d84276dfeeb4b066" title=" " alt="" coords="5,56,149,83"/>
</map>
</div>

</div>
</div>
<a id="a6bc92444f7239ca27c5a89de99f5f4ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6bc92444f7239ca27c5a89de99f5f4ac">&#9670;&nbsp;</a></span>femu_ring_create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structrte__ring.html">rte_ring</a>* femu_ring_create </td>
          <td>(</td>
          <td class="paramtype">enum <a class="el" href="rte__ring_8h.html#a40c2b32849ee40a3926720f2ab1cdec7">femu_ring_type</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Create a ring.</p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramname">type</td><td>Type for the ring. (FEMU_RING_TYPE_SP_SC or FEMU_RING_TYPE_MP_SC). </td></tr>
    <tr><td class="paramname">count</td><td>Size of the ring in elements. </td></tr>
    <tr><td class="paramname">socket_id</td><td>Socket ID to allocate memory on, or FEMU_ENV_SOCKET_ID_ANY for any socket.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>a pointer to the created ring. </dd></dl>
<div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="rte__ring_8c_a6bc92444f7239ca27c5a89de99f5f4ac_cgraph.png" border="0" usemap="#rte__ring_8c_a6bc92444f7239ca27c5a89de99f5f4ac_cgraph" alt=""/></div>
<map name="rte__ring_8c_a6bc92444f7239ca27c5a89de99f5f4ac_cgraph" id="rte__ring_8c_a6bc92444f7239ca27c5a89de99f5f4ac_cgraph">
<area shape="rect" title=" " alt="" coords="5,24,141,50"/>
<area shape="rect" href="rte__ring_8c.html#a122812947c00f9ed3066232accf5fa5a" title=" " alt="" coords="189,24,309,50"/>
<area shape="rect" href="rte__ring_8h.html#a5a85fd1038be9376de166494057e6aa1" title=" " alt="" coords="572,24,703,50"/>
<area shape="rect" href="rte__ring_8c.html#ac29f8523d355c107377858bdeb468486" title=" " alt="" coords="357,24,524,50"/>
<area shape="rect" href="rte__ring_8c.html#a7a44f25853c926ac1b29562857244366" title=" " alt="" coords="391,74,491,101"/>
</map>
</div>
<div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><img src="rte__ring_8c_a6bc92444f7239ca27c5a89de99f5f4ac_icgraph.png" border="0" usemap="#rte__ring_8c_a6bc92444f7239ca27c5a89de99f5f4ac_icgraph" alt=""/></div>
<map name="rte__ring_8c_a6bc92444f7239ca27c5a89de99f5f4ac_icgraph" id="rte__ring_8c_a6bc92444f7239ca27c5a89de99f5f4ac_icgraph">
<area shape="rect" title=" " alt="" coords="1275,5,1411,32"/>
<area shape="rect" href="nvme_8h.html#a81f7e8af7ddcdfe9bef6af6c0333462d" title="创建poller线程，以及两个ring queue：to_ftl和to_poller" alt="" coords="1076,5,1227,32"/>
<area shape="rect" href="nvme-admin_8c.html#a8b2764426b75545dfc03229b811607eb" title=" " alt="" coords="857,5,1028,32"/>
<area shape="rect" href="nvme-admin_8c.html#ac726ef5f792706a8a28f07f19c5097b1" title="识别、执行admin命令" alt="" coords="667,5,809,32"/>
<area shape="rect" href="nvme_8h.html#a7042f589909852500d6f26c36b78850b" title="处理admin命令的sq队列" alt="" coords="432,5,619,32"/>
<area shape="rect" href="femu_8c.html#ac83bc83578ac4c5c414ec892ca2169e3" title=" " alt="" coords="197,5,384,32"/>
<area shape="rect" href="femu_8c.html#a78a5db5b8b1cead9d84276dfeeb4b066" title=" " alt="" coords="5,5,149,32"/>
</map>
</div>

</div>
</div>
<a id="ab2417e0e85ffd0e61ec4b0ee263ab809"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab2417e0e85ffd0e61ec4b0ee263ab809">&#9670;&nbsp;</a></span>femu_ring_dequeue()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t femu_ring_dequeue </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structrte__ring.html">rte_ring</a> *&#160;</td>
          <td class="paramname"><em>ring</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>objs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Dequeue count objects from the ring into the array objs.</p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramname">ring</td><td>A pointer to the ring. </td></tr>
    <tr><td class="paramname">objs</td><td>A pointer to the array to be dequeued. </td></tr>
    <tr><td class="paramname">count</td><td>Maximum number of elements to be dequeued.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>the number of objects dequeued which is less than 'count'. </dd></dl>
<div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="rte__ring_8c_ab2417e0e85ffd0e61ec4b0ee263ab809_cgraph.png" border="0" usemap="#rte__ring_8c_ab2417e0e85ffd0e61ec4b0ee263ab809_cgraph" alt=""/></div>
<map name="rte__ring_8c_ab2417e0e85ffd0e61ec4b0ee263ab809_cgraph" id="rte__ring_8c_ab2417e0e85ffd0e61ec4b0ee263ab809_cgraph">
<area shape="rect" title=" " alt="" coords="5,31,156,57"/>
<area shape="rect" href="rte__ring_8h.html#a8742d4b89ce43dbd93cc2ef48518ccf0" title=" " alt="" coords="204,31,379,57"/>
<area shape="rect" href="rte__ring_8h.html#a201b5c512389dd58216906866aba1ec5" title=" " alt="" coords="427,31,599,57"/>
<area shape="rect" href="rte__ring_8h.html#a3a4127db74610c522be2a4f8f70c033d" title=" " alt="" coords="647,5,853,32"/>
<area shape="rect" href="rte__ring_8h.html#a269bf4b0dad1a7d2bb0396350f5e7976" title=" " alt="" coords="703,56,797,83"/>
<area shape="rect" href="rte__atomic__x86_8h.html#a092485d3d43a2cd7ee61a1c2d2178d31" title=" " alt="" coords="901,5,1064,32"/>
</map>
</div>
<div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><img src="rte__ring_8c_ab2417e0e85ffd0e61ec4b0ee263ab809_icgraph.png" border="0" usemap="#rte__ring_8c_ab2417e0e85ffd0e61ec4b0ee263ab809_icgraph" alt=""/></div>
<map name="rte__ring_8c_ab2417e0e85ffd0e61ec4b0ee263ab809_icgraph" id="rte__ring_8c_ab2417e0e85ffd0e61ec4b0ee263ab809_icgraph">
<area shape="rect" title=" " alt="" coords="1689,31,1840,57"/>
<area shape="rect" href="ftl_8c.html#a3716c928ff3ccf16e82ae281fd3dd6d3" title="ftl线程函数，不断从to_ftl中取req，处理（计算出时延）后放入to_poller" alt="" coords="1517,5,1601,32"/>
<area shape="rect" href="nvme-io_8c.html#a581e208522e056298eed5248b50af242" title="从to_poller队列中取req，放入cq中，然后通知上层操作已完成" alt="" coords="1477,56,1641,83"/>
<area shape="rect" href="ftl_8h.html#af3f6de830b620d1f3060c7de8c8ddec0" title="初始化ssd参数，为ssd各层结构体分配空间，创建ftl线程" alt="" coords="1342,5,1414,32"/>
<area shape="rect" href="bb_8c.html#a3fc7384f815cca2f52003206b20324df" title=" " alt="" coords="1170,5,1237,32"/>
<area shape="rect" href="nvme_8h.html#a5b8b300920ee99be86c5e3e80a6f7949" title=" " alt="" coords="914,5,1075,32"/>
<area shape="rect" href="femu_8c.html#a76a47b73caa1fa75fb706e3ed8f16a73" title=" " alt="" coords="667,5,861,32"/>
<area shape="rect" href="femu_8c.html#a966fbeb7afc495936413dbc445a0dd45" title=" " alt="" coords="472,5,579,32"/>
<area shape="rect" href="femu_8c.html#aeb3b70286609648db37222148efcf8d3" title=" " alt="" coords="229,5,353,32"/>
<area shape="rect" href="nvme-io_8c.html#acb7bf552fb77faee4d0aa021d51af4b7" title="nvme poller线程函数，不断处理sq和生成cq" alt="" coords="1327,56,1429,83"/>
<area shape="rect" href="nvme_8h.html#a81f7e8af7ddcdfe9bef6af6c0333462d" title="创建poller线程，以及两个ring queue：to_ftl和to_poller" alt="" coords="1128,56,1279,83"/>
<area shape="rect" href="nvme-admin_8c.html#a8b2764426b75545dfc03229b811607eb" title=" " alt="" coords="909,56,1080,83"/>
<area shape="rect" href="nvme-admin_8c.html#ac726ef5f792706a8a28f07f19c5097b1" title="识别、执行admin命令" alt="" coords="693,56,835,83"/>
<area shape="rect" href="nvme_8h.html#a7042f589909852500d6f26c36b78850b" title="处理admin命令的sq队列" alt="" coords="432,56,619,83"/>
<area shape="rect" href="femu_8c.html#ac83bc83578ac4c5c414ec892ca2169e3" title=" " alt="" coords="197,56,384,83"/>
<area shape="rect" href="femu_8c.html#a78a5db5b8b1cead9d84276dfeeb4b066" title=" " alt="" coords="5,56,149,83"/>
</map>
</div>

</div>
</div>
<a id="a3afc06d02f63e84fe1569c99955af57a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3afc06d02f63e84fe1569c99955af57a">&#9670;&nbsp;</a></span>femu_ring_enqueue()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t femu_ring_enqueue </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structrte__ring.html">rte_ring</a> *&#160;</td>
          <td class="paramname"><em>ring</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>objs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Queue the array of objects (with length count) on the ring.</p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramname">ring</td><td>A pointer to the ring. </td></tr>
    <tr><td class="paramname">objs</td><td>A pointer to the array to be queued. </td></tr>
    <tr><td class="paramname">count</td><td>Length count of the array of objects.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>the number of objects enqueued. </dd></dl>
<div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="rte__ring_8c_a3afc06d02f63e84fe1569c99955af57a_cgraph.png" border="0" usemap="#rte__ring_8c_a3afc06d02f63e84fe1569c99955af57a_cgraph" alt=""/></div>
<map name="rte__ring_8c_a3afc06d02f63e84fe1569c99955af57a_cgraph" id="rte__ring_8c_a3afc06d02f63e84fe1569c99955af57a_cgraph">
<area shape="rect" title=" " alt="" coords="5,31,156,57"/>
<area shape="rect" href="rte__ring_8h.html#ab8debfb458e927d559e7ce750048502d" title=" " alt="" coords="204,31,375,57"/>
<area shape="rect" href="rte__ring_8h.html#a388f737bcdf0a8ee4cf6f75464ca5979" title=" " alt="" coords="423,31,595,57"/>
<area shape="rect" href="rte__ring_8h.html#a22ab749e8f41b8e232a5c54a5c100d16" title=" " alt="" coords="643,5,848,32"/>
<area shape="rect" href="rte__ring_8h.html#a269bf4b0dad1a7d2bb0396350f5e7976" title=" " alt="" coords="698,56,793,83"/>
<area shape="rect" href="rte__atomic__x86_8h.html#a092485d3d43a2cd7ee61a1c2d2178d31" title=" " alt="" coords="896,5,1059,32"/>
</map>
</div>
<div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><img src="rte__ring_8c_a3afc06d02f63e84fe1569c99955af57a_icgraph.png" border="0" usemap="#rte__ring_8c_a3afc06d02f63e84fe1569c99955af57a_icgraph" alt=""/></div>
<map name="rte__ring_8c_a3afc06d02f63e84fe1569c99955af57a_icgraph" id="rte__ring_8c_a3afc06d02f63e84fe1569c99955af57a_icgraph">
<area shape="rect" title=" " alt="" coords="1683,31,1833,57"/>
<area shape="rect" href="ftl_8c.html#a3716c928ff3ccf16e82ae281fd3dd6d3" title="ftl线程函数，不断从to_ftl中取req，处理（计算出时延）后放入to_poller" alt="" coords="1514,5,1598,32"/>
<area shape="rect" href="nvme-io_8c.html#aaa8fe64369c3e7b33785cabed5a4cbde" title="从sq中取出req，放入to_ftl队列中，交由ftl处理" alt="" coords="1477,56,1635,83"/>
<area shape="rect" href="ftl_8h.html#af3f6de830b620d1f3060c7de8c8ddec0" title="初始化ssd参数，为ssd各层结构体分配空间，创建ftl线程" alt="" coords="1342,5,1414,32"/>
<area shape="rect" href="bb_8c.html#a3fc7384f815cca2f52003206b20324df" title=" " alt="" coords="1170,5,1237,32"/>
<area shape="rect" href="nvme_8h.html#a5b8b300920ee99be86c5e3e80a6f7949" title=" " alt="" coords="914,5,1075,32"/>
<area shape="rect" href="femu_8c.html#a76a47b73caa1fa75fb706e3ed8f16a73" title=" " alt="" coords="667,5,861,32"/>
<area shape="rect" href="femu_8c.html#a966fbeb7afc495936413dbc445a0dd45" title=" " alt="" coords="472,5,579,32"/>
<area shape="rect" href="femu_8c.html#aeb3b70286609648db37222148efcf8d3" title=" " alt="" coords="229,5,353,32"/>
<area shape="rect" href="nvme-io_8c.html#acb7bf552fb77faee4d0aa021d51af4b7" title="nvme poller线程函数，不断处理sq和生成cq" alt="" coords="1327,56,1429,83"/>
<area shape="rect" href="nvme_8h.html#a81f7e8af7ddcdfe9bef6af6c0333462d" title="创建poller线程，以及两个ring queue：to_ftl和to_poller" alt="" coords="1128,56,1279,83"/>
<area shape="rect" href="nvme-admin_8c.html#a8b2764426b75545dfc03229b811607eb" title=" " alt="" coords="909,56,1080,83"/>
<area shape="rect" href="nvme-admin_8c.html#ac726ef5f792706a8a28f07f19c5097b1" title="识别、执行admin命令" alt="" coords="693,56,835,83"/>
<area shape="rect" href="nvme_8h.html#a7042f589909852500d6f26c36b78850b" title="处理admin命令的sq队列" alt="" coords="432,56,619,83"/>
<area shape="rect" href="femu_8c.html#ac83bc83578ac4c5c414ec892ca2169e3" title=" " alt="" coords="197,56,384,83"/>
<area shape="rect" href="femu_8c.html#a78a5db5b8b1cead9d84276dfeeb4b066" title=" " alt="" coords="5,56,149,83"/>
</map>
</div>

</div>
</div>
<a id="aae4026d87730ebef2cbcd08a42778e80"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae4026d87730ebef2cbcd08a42778e80">&#9670;&nbsp;</a></span>femu_ring_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void femu_ring_free </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structrte__ring.html">rte_ring</a> *&#160;</td>
          <td class="paramname"><em>ring</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Free the ring.</p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramname">ring</td><td>Ring to free. </td></tr>
  </table>
  </dd>
</dl>
<div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="rte__ring_8c_aae4026d87730ebef2cbcd08a42778e80_cgraph.png" border="0" usemap="#rte__ring_8c_aae4026d87730ebef2cbcd08a42778e80_cgraph" alt=""/></div>
<map name="rte__ring_8c_aae4026d87730ebef2cbcd08a42778e80_cgraph" id="rte__ring_8c_aae4026d87730ebef2cbcd08a42778e80_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,127,32"/>
<area shape="rect" href="rte__ring_8c.html#a564e012c1eb4ae08f9eea3acfd08b377" title=" " alt="" coords="175,5,280,32"/>
</map>
</div>
<div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><img src="rte__ring_8c_aae4026d87730ebef2cbcd08a42778e80_icgraph.png" border="0" usemap="#rte__ring_8c_aae4026d87730ebef2cbcd08a42778e80_icgraph" alt=""/></div>
<map name="rte__ring_8c_aae4026d87730ebef2cbcd08a42778e80_icgraph" id="rte__ring_8c_aae4026d87730ebef2cbcd08a42778e80_icgraph">
<area shape="rect" title=" " alt="" coords="520,5,641,32"/>
<area shape="rect" href="femu_8c.html#a749caeadb2968b6c63c5f1b2d646eb5a" title=" " alt="" coords="313,5,472,32"/>
<area shape="rect" href="femu_8c.html#a340aa0343b4141d520e32a9e4bc303a0" title=" " alt="" coords="177,5,265,32"/>
<area shape="rect" href="femu_8c.html#aeb3b70286609648db37222148efcf8d3" title=" " alt="" coords="5,5,129,32"/>
</map>
</div>

</div>
</div>
<a id="a122812947c00f9ed3066232accf5fa5a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a122812947c00f9ed3066232accf5fa5a">&#9670;&nbsp;</a></span>rte_ring_create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structrte__ring.html">rte_ring</a>* rte_ring_create </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Create a new ring named <em>name</em> in memory.</p>
<p>This function uses <code>memzone_reserve()</code> to allocate memory. Then it calls <a class="el" href="rte__ring_8h.html#a7a44f25853c926ac1b29562857244366">rte_ring_init()</a> to initialize an empty ring.</p>
<p>The new ring size is set to <em>count</em>, which must be a power of two. Water marking is disabled by default. The real usable ring size is <em>count-1</em> instead of <em>count</em> to differentiate a free ring from an empty ring.</p>
<p>The ring is added in RTE_TAILQ_RING list.</p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>The name of the ring. </td></tr>
    <tr><td class="paramname">count</td><td>The size of the ring (must be a power of 2). </td></tr>
    <tr><td class="paramname">socket_id</td><td>The <em>socket_id</em> argument is the socket identifier in case of NUMA. The value can be <em>SOCKET_ID_ANY</em> if there is no NUMA constraint for the reserved zone. </td></tr>
    <tr><td class="paramname">flags</td><td>An OR of the following:<ul>
<li>RING_F_SP_ENQ: If this flag is set, the default behavior when using <code><a class="el" href="rte__ring_8h.html#aa1e5c7ff81ee177734288a1698b1106e">rte_ring_enqueue()</a></code> or <code><a class="el" href="rte__ring_8h.html#ab8debfb458e927d559e7ce750048502d">rte_ring_enqueue_bulk()</a></code> is "single-producer". Otherwise, it is "multi-producers".</li>
<li>RING_F_SC_DEQ: If this flag is set, the default behavior when using <code><a class="el" href="rte__ring_8h.html#a896024f865225e243f2c66c02825a9e2">rte_ring_dequeue()</a></code> or <code><a class="el" href="rte__ring_8h.html#a558ff95b944832acf8de439c769638f3">rte_ring_dequeue_bulk()</a></code> is "single-consumer". Otherwise, it is "multi-consumers". </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>On success, the pointer to the new allocated ring. NULL on error with rte_errno set appropriately. Possible errno values include:<ul>
<li>E_RTE_NO_CONFIG - function could not get pointer to rte_config structure</li>
<li>E_RTE_SECONDARY - function was called from a secondary process instance</li>
<li>EINVAL - count provided is not a power of 2</li>
<li>ENOSPC - the maximum number of memzones has already been allocated</li>
<li>EEXIST - a memzone with the same name already exists</li>
<li>ENOMEM - no appropriate memory area found in which to create memzone </li>
</ul>
</dd></dl>
<div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="rte__ring_8c_a122812947c00f9ed3066232accf5fa5a_cgraph.png" border="0" usemap="#rte__ring_8c_a122812947c00f9ed3066232accf5fa5a_cgraph" alt=""/></div>
<map name="rte__ring_8c_a122812947c00f9ed3066232accf5fa5a_cgraph" id="rte__ring_8c_a122812947c00f9ed3066232accf5fa5a_cgraph">
<area shape="rect" title=" " alt="" coords="5,24,125,50"/>
<area shape="rect" href="rte__ring_8h.html#a5a85fd1038be9376de166494057e6aa1" title=" " alt="" coords="388,24,519,50"/>
<area shape="rect" href="rte__ring_8c.html#ac29f8523d355c107377858bdeb468486" title=" " alt="" coords="173,24,340,50"/>
<area shape="rect" href="rte__ring_8c.html#a7a44f25853c926ac1b29562857244366" title=" " alt="" coords="207,74,307,101"/>
</map>
</div>
<div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><img src="rte__ring_8c_a122812947c00f9ed3066232accf5fa5a_icgraph.png" border="0" usemap="#rte__ring_8c_a122812947c00f9ed3066232accf5fa5a_icgraph" alt=""/></div>
<map name="rte__ring_8c_a122812947c00f9ed3066232accf5fa5a_icgraph" id="rte__ring_8c_a122812947c00f9ed3066232accf5fa5a_icgraph">
<area shape="rect" title=" " alt="" coords="1459,5,1579,32"/>
<area shape="rect" href="rte__ring_8c.html#a6bc92444f7239ca27c5a89de99f5f4ac" title=" " alt="" coords="1275,5,1411,32"/>
<area shape="rect" href="nvme_8h.html#a81f7e8af7ddcdfe9bef6af6c0333462d" title="创建poller线程，以及两个ring queue：to_ftl和to_poller" alt="" coords="1076,5,1227,32"/>
<area shape="rect" href="nvme-admin_8c.html#a8b2764426b75545dfc03229b811607eb" title=" " alt="" coords="857,5,1028,32"/>
<area shape="rect" href="nvme-admin_8c.html#ac726ef5f792706a8a28f07f19c5097b1" title="识别、执行admin命令" alt="" coords="667,5,809,32"/>
<area shape="rect" href="nvme_8h.html#a7042f589909852500d6f26c36b78850b" title="处理admin命令的sq队列" alt="" coords="432,5,619,32"/>
<area shape="rect" href="femu_8c.html#ac83bc83578ac4c5c414ec892ca2169e3" title=" " alt="" coords="197,5,384,32"/>
<area shape="rect" href="femu_8c.html#a78a5db5b8b1cead9d84276dfeeb4b066" title=" " alt="" coords="5,5,149,32"/>
</map>
</div>

</div>
</div>
<a id="a09c464281266543ebc0766902467c69b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a09c464281266543ebc0766902467c69b">&#9670;&nbsp;</a></span>rte_ring_dump()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rte_ring_dump </td>
          <td>(</td>
          <td class="paramtype">FILE *&#160;</td>
          <td class="paramname"><em>f</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structrte__ring.html">rte_ring</a> *&#160;</td>
          <td class="paramname"><em>r</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Dump the status of the ring to a file.</p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramname">f</td><td>A pointer to a file for output </td></tr>
    <tr><td class="paramname">r</td><td>A pointer to the ring structure. </td></tr>
  </table>
  </dd>
</dl>
<div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="rte__ring_8c_a09c464281266543ebc0766902467c69b_cgraph.png" border="0" usemap="#rte__ring_8c_a09c464281266543ebc0766902467c69b_cgraph" alt=""/></div>
<map name="rte__ring_8c_a09c464281266543ebc0766902467c69b_cgraph" id="rte__ring_8c_a09c464281266543ebc0766902467c69b_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,121,32"/>
<area shape="rect" href="rte__ring_8h.html#abc8376d2c6e609707d52032860880b34" title=" " alt="" coords="365,5,480,32"/>
<area shape="rect" href="rte__ring_8h.html#aa6fe2e810cf4015bb95023c54e18b73a" title=" " alt="" coords="169,31,317,57"/>
</map>
</div>

</div>
</div>
<a id="a564e012c1eb4ae08f9eea3acfd08b377"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a564e012c1eb4ae08f9eea3acfd08b377">&#9670;&nbsp;</a></span>rte_ring_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rte_ring_free </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structrte__ring.html">rte_ring</a> *&#160;</td>
          <td class="paramname"><em>r</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>De-allocate all memory used by the ring.</p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramname">r</td><td>Ring to free </td></tr>
  </table>
  </dd>
</dl>
<div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><img src="rte__ring_8c_a564e012c1eb4ae08f9eea3acfd08b377_icgraph.png" border="0" usemap="#rte__ring_8c_a564e012c1eb4ae08f9eea3acfd08b377_icgraph" alt=""/></div>
<map name="rte__ring_8c_a564e012c1eb4ae08f9eea3acfd08b377_icgraph" id="rte__ring_8c_a564e012c1eb4ae08f9eea3acfd08b377_icgraph">
<area shape="rect" title=" " alt="" coords="689,5,795,32"/>
<area shape="rect" href="rte__ring_8c.html#aae4026d87730ebef2cbcd08a42778e80" title=" " alt="" coords="520,5,641,32"/>
<area shape="rect" href="femu_8c.html#a749caeadb2968b6c63c5f1b2d646eb5a" title=" " alt="" coords="313,5,472,32"/>
<area shape="rect" href="femu_8c.html#a340aa0343b4141d520e32a9e4bc303a0" title=" " alt="" coords="177,5,265,32"/>
<area shape="rect" href="femu_8c.html#aeb3b70286609648db37222148efcf8d3" title=" " alt="" coords="5,5,129,32"/>
</map>
</div>

</div>
</div>
<a id="ac29f8523d355c107377858bdeb468486"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac29f8523d355c107377858bdeb468486">&#9670;&nbsp;</a></span>rte_ring_get_memsize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ssize_t rte_ring_get_memsize </td>
          <td>(</td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>count</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Calculate the memory size needed for a ring</p>
<p>This function returns the number of bytes needed for a ring, given the number of elements in it. This value is the sum of the size of the structure <a class="el" href="structrte__ring.html">rte_ring</a> and the size of the memory needed by the objects pointers. The value is aligned to a cache line size.</p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramname">count</td><td>The number of elements in the ring (must be a power of 2). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd><ul>
<li>The memory size needed for the ring on success.</li>
<li>-EINVAL if count is not a power of 2. </li>
</ul>
</dd></dl>
<div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><img src="rte__ring_8c_ac29f8523d355c107377858bdeb468486_icgraph.png" border="0" usemap="#rte__ring_8c_ac29f8523d355c107377858bdeb468486_icgraph" alt=""/></div>
<map name="rte__ring_8c_ac29f8523d355c107377858bdeb468486_icgraph" id="rte__ring_8c_ac29f8523d355c107377858bdeb468486_icgraph">
<area shape="rect" title=" " alt="" coords="1627,5,1793,32"/>
<area shape="rect" href="rte__ring_8c.html#a122812947c00f9ed3066232accf5fa5a" title=" " alt="" coords="1459,5,1579,32"/>
<area shape="rect" href="rte__ring_8c.html#a6bc92444f7239ca27c5a89de99f5f4ac" title=" " alt="" coords="1275,5,1411,32"/>
<area shape="rect" href="nvme_8h.html#a81f7e8af7ddcdfe9bef6af6c0333462d" title="创建poller线程，以及两个ring queue：to_ftl和to_poller" alt="" coords="1076,5,1227,32"/>
<area shape="rect" href="nvme-admin_8c.html#a8b2764426b75545dfc03229b811607eb" title=" " alt="" coords="857,5,1028,32"/>
<area shape="rect" href="nvme-admin_8c.html#ac726ef5f792706a8a28f07f19c5097b1" title="识别、执行admin命令" alt="" coords="667,5,809,32"/>
<area shape="rect" href="nvme_8h.html#a7042f589909852500d6f26c36b78850b" title="处理admin命令的sq队列" alt="" coords="432,5,619,32"/>
<area shape="rect" href="femu_8c.html#ac83bc83578ac4c5c414ec892ca2169e3" title=" " alt="" coords="197,5,384,32"/>
<area shape="rect" href="femu_8c.html#a78a5db5b8b1cead9d84276dfeeb4b066" title=" " alt="" coords="5,5,149,32"/>
</map>
</div>

</div>
</div>
<a id="a7a44f25853c926ac1b29562857244366"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7a44f25853c926ac1b29562857244366">&#9670;&nbsp;</a></span>rte_ring_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rte_ring_init </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structrte__ring.html">rte_ring</a> *&#160;</td>
          <td class="paramname"><em>r</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initialize a ring structure.</p>
<p>Initialize a ring structure in memory pointed by "r". The size of the memory area must be large enough to store the ring structure and the object table. It is advised to use <a class="el" href="rte__ring_8h.html#ac29f8523d355c107377858bdeb468486">rte_ring_get_memsize()</a> to get the appropriate size.</p>
<p>The ring size is set to <em>count</em>, which must be a power of two. Water marking is disabled by default. The real usable ring size is <em>count-1</em> instead of <em>count</em> to differentiate a free ring from an empty ring.</p>
<p>The ring is not added in RTE_TAILQ_RING global list. Indeed, the memory given by the caller may not be shareable among dpdk processes.</p>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramname">r</td><td>The pointer to the ring structure followed by the objects table. </td></tr>
    <tr><td class="paramname">name</td><td>The name of the ring. </td></tr>
    <tr><td class="paramname">count</td><td>The number of elements in the ring (must be a power of 2). </td></tr>
    <tr><td class="paramname">flags</td><td>An OR of the following:<ul>
<li>RING_F_SP_ENQ: If this flag is set, the default behavior when using <code><a class="el" href="rte__ring_8h.html#aa1e5c7ff81ee177734288a1698b1106e">rte_ring_enqueue()</a></code> or <code><a class="el" href="rte__ring_8h.html#ab8debfb458e927d559e7ce750048502d">rte_ring_enqueue_bulk()</a></code> is "single-producer". Otherwise, it is "multi-producers".</li>
<li>RING_F_SC_DEQ: If this flag is set, the default behavior when using <code><a class="el" href="rte__ring_8h.html#a896024f865225e243f2c66c02825a9e2">rte_ring_dequeue()</a></code> or <code><a class="el" href="rte__ring_8h.html#a558ff95b944832acf8de439c769638f3">rte_ring_dequeue_bulk()</a></code> is "single-consumer". Otherwise, it is "multi-consumers". </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd>0 on success, or a negative value on error. </dd></dl>
<div class="dynheader">
函数调用图:</div>
<div class="dyncontent">
<div class="center"><img src="rte__ring_8c_a7a44f25853c926ac1b29562857244366_cgraph.png" border="0" usemap="#rte__ring_8c_a7a44f25853c926ac1b29562857244366_cgraph" alt=""/></div>
<map name="rte__ring_8c_a7a44f25853c926ac1b29562857244366_cgraph" id="rte__ring_8c_a7a44f25853c926ac1b29562857244366_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,105,32"/>
<area shape="rect" href="rte__ring_8h.html#a5a85fd1038be9376de166494057e6aa1" title=" " alt="" coords="153,5,284,32"/>
</map>
</div>
<div class="dynheader">
这是这个函数的调用关系图:</div>
<div class="dyncontent">
<div class="center"><img src="rte__ring_8c_a7a44f25853c926ac1b29562857244366_icgraph.png" border="0" usemap="#rte__ring_8c_a7a44f25853c926ac1b29562857244366_icgraph" alt=""/></div>
<map name="rte__ring_8c_a7a44f25853c926ac1b29562857244366_icgraph" id="rte__ring_8c_a7a44f25853c926ac1b29562857244366_icgraph">
<area shape="rect" title=" " alt="" coords="1627,5,1727,32"/>
<area shape="rect" href="rte__ring_8c.html#a122812947c00f9ed3066232accf5fa5a" title=" " alt="" coords="1459,5,1579,32"/>
<area shape="rect" href="rte__ring_8c.html#a6bc92444f7239ca27c5a89de99f5f4ac" title=" " alt="" coords="1275,5,1411,32"/>
<area shape="rect" href="nvme_8h.html#a81f7e8af7ddcdfe9bef6af6c0333462d" title="创建poller线程，以及两个ring queue：to_ftl和to_poller" alt="" coords="1076,5,1227,32"/>
<area shape="rect" href="nvme-admin_8c.html#a8b2764426b75545dfc03229b811607eb" title=" " alt="" coords="857,5,1028,32"/>
<area shape="rect" href="nvme-admin_8c.html#ac726ef5f792706a8a28f07f19c5097b1" title="识别、执行admin命令" alt="" coords="667,5,809,32"/>
<area shape="rect" href="nvme_8h.html#a7042f589909852500d6f26c36b78850b" title="处理admin命令的sq队列" alt="" coords="432,5,619,32"/>
<area shape="rect" href="femu_8c.html#ac83bc83578ac4c5c414ec892ca2169e3" title=" " alt="" coords="197,5,384,32"/>
<area shape="rect" href="femu_8c.html#a78a5db5b8b1cead9d84276dfeeb4b066" title=" " alt="" coords="5,5,149,32"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_a482d5bde24295b7334c8aec815f3a1a.html">femu</a></li><li class="navelem"><a class="el" href="dir_675b3bb964766b80ad0a2f3606076afc.html">lib</a></li><li class="navelem"><a class="el" href="rte__ring_8c.html">rte_ring.c</a></li>
    <li class="footer">制作者
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
